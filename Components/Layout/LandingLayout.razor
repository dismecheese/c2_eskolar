@inherits LayoutComponentBase
@inject NavigationManager Navigation

<!-- ---------------- LANDING PAGE LAYOUT ---------------- -->
<div class="landing-page">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- ---------------- HEADER & NAVBAR ---------------- -->
    <header class="landing-header">
        <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
            <div class="container-fluid" style="max-height: fit-content;">
                <div class="eskolar-logo">
                    <img src="/images/main/eSkolar-White.svg" class="eskolar-logo-img" alt="eSkolar Logo" />
                    <img src="/images/main/eSkolar-Yellow.svg" class="eskolar-logo-img-hover" alt="eSkolar Logo Hover" />
                </div>

                <!-- Toggle button for mobile menu -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Collapsible nav links -->
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item me-3">
                            <a class="nav-link nav-link-custom nav-link-home" href="/#home">Home</a>
                        </li>
                        <li class="nav-item me-3">
                            <a class="nav-link nav-link-custom" href="/#about">About</a>
                        </li>
                        <li class="nav-item me-3">
                            <a class="nav-link nav-link-custom" href="/partners">Partners</a>
                        </li>
                        <li class="nav-item me-3">
                            <a class="nav-link nav-link-custom" href="/faqs">FAQs</a>
                        </li>
                        <li class="nav-item me-3">
                            <a class="nav-link nav-link-custom" href="#" data-bs-toggle="modal" data-bs-target="#contactModal">Contact Us</a>
                        </li>
                        <li class="nav-item me-3">
                            <a type="button" href="/signup" class="btn btn-primary nav-button ms-2">Sign Up</a>
                        </li>
                        <li class="nav-item me-3">
                            <a type="button" href="/login" class="btn btn-primary nav-button ms-2">Login</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- ---------------- MAIN CONTENT ---------------- -->
    <main class="landing-main">
        @Body <!-- Page content will be rendered here -->
    </main>

    <!-- ---------------- FOOTER ---------------- -->
    <footer class="landing-footer">
    <div class="footer-container-custom">
        <div class="footer-main-row">

            <!-- Social media links -->
            <div class="footer-follow">
                <strong>Follow Us</strong>
                <div class="footer-social-icons">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="Telegram"><i class="fab fa-telegram-plane"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-divider"></div>

            <!-- Contact email -->
            <div class="footer-contact">
                <strong>Contact Us</strong>
                <div class="footer-contact-email">
                    <i class="far fa-envelope"></i>
                    <span><a href="#" data-bs-toggle="modal" data-bs-target="#contactModal" style="color: inherit; text-decoration: none;">eskolarph@gmail.com</a></span>
                </div>
            </div>
        </div>

        <!-- Footer bottom links -->
        <div class="footer-bottom-row">
            <div class="footer-links">
                <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal" role="button">
                    Privacy Policy
                </a>
                <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal" role="button">
                    Terms &amp; Conditions
                </a>
<!-- ---------------- PRIVACY POLICY MODAL ---------------- -->
<div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="terms-bubble">
                        <h4>1. Introduction</h4>
                        <p>eSkolar is committed to protecting your privacy and ensuring the security of your personal and academic information. This Privacy Policy explains how we collect, use, store, and protect your data when you use our platform. By accessing or using eSkolar, you consent to the practices described in this policy.</p>

                        <h4>2. Information We Collect</h4>
                        <ul>
                                <li><strong>Personal Information:</strong> Name, email address, contact details, date of birth, and other information provided during registration or profile updates.</li>
                                <li><strong>Academic Information:</strong> School, course, grades, documents (e.g., IDs, grade reports), and scholarship application data.</li>
                                <li><strong>Usage Data:</strong> Log data, device information, browser type, IP address, and interactions with the platform.</li>
                                <li><strong>Institution/Benefactor Data:</strong> Organization details, posted scholarships, announcements, and partnership information.</li>
                        </ul>

                        <h4>3. How We Use Your Information</h4>
                        <ul>
                                <li>To provide, operate, and improve the eSkolar platform and its services.</li>
                                <li>To process scholarship applications, manage user accounts, and facilitate communication between students, institutions, and benefactors.</li>
                                <li>To verify user identity and eligibility for scholarships or platform features.</li>
                                <li>To comply with legal obligations and institutional policies.</li>
                                <li>To analyze usage trends and enhance user experience.</li>
                                <li>To send important notifications, updates, and support communications.</li>
                        </ul>

                        <h4>4. Data Sharing and Disclosure</h4>
                        <ul>
                                <li>We do <strong>not</strong> sell or rent your personal information to third parties.</li>
                                <li>Information may be shared with authorized institutions and benefactors for scholarship processing and verification, subject to your consent.</li>
                                <li>We may disclose information if required by law, regulation, or legal process, or to protect the rights, property, or safety of eSkolar, its users, or others.</li>
                        </ul>

                        <h4>5. Data Storage and Security</h4>
                        <ul>
                                <li>Your personal information and uploaded documents are securely stored using Microsoft Azure cloud services. Data is encrypted both in transit and at rest, following industry best practices.</li>
                                <li>We implement industry-standard security measures, including role-based access control (RBAC), multi-factor authentication (MFA), firewalls, and regular security audits.</li>
                                <li>Automated daily backups and geo-replication are used to prevent data loss and support recovery.</li>
                                <li>Azure’s global infrastructure and compliance certifications help ensure your data is protected and managed according to international and Philippine data privacy standards.</li>
                        </ul>

                        <h4>6. Data Retention</h4>
                        <p>We retain your personal and academic information only as long as necessary to fulfill the purposes described in this policy, comply with legal requirements, and support platform operations. You may request deletion of your account and data at any time, subject to applicable laws and institutional policies.</p>

                        <h4>7. Your Rights</h4>
                        <ul>
                                <li>You have the right to access, correct, update, or request deletion of your personal data.</li>
                                <li>You may withdraw consent for data processing or object to certain uses of your information.</li>
                                <li>To exercise your rights, contact us at <a href="mailto:eskolarph@gmail.com">eskolarph@gmail.com</a> or use the support features on the platform.</li>
                        </ul>

                        <h4>8. Cookies and Tracking Technologies</h4>
                        <p>eSkolar uses cookies and similar technologies to enhance your experience, remember preferences, and analyze platform usage. You may manage cookie preferences through your browser settings. For more details, see our <a href="/cookie-policy">Cookie Policy</a>.</p>

                        <h4>9. Children’s Privacy</h4>
                        <p>Users under 18 must have parental or guardian consent to use eSkolar. We do not knowingly collect personal information from children without appropriate consent.</p>

                        <h4>10. Data Privacy Act Compliance</h4>
                        <p>eSkolar complies with the Philippine Data Privacy Act of 2012 (RA 10173) and other applicable data protection laws. We are committed to upholding your rights and safeguarding your information.</p>

                        <h4>11. Changes to This Policy</h4>
                        <p>We may update this Privacy Policy from time to time. Significant changes will be communicated through the platform or via email. Continued use of eSkolar after changes means you accept the updated policy.</p>

                        <h4>12. Contact Us</h4>
                        <p>If you have questions, concerns, or requests regarding this Privacy Policy or your data, please contact us at <a href="mailto:eskolarph@gmail.com">eskolarph@gmail.com</a>.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
            </div>
        </div>
    </div>
</div>
                <a href="#">Site Map</a>
            </div>
        </div>

        <!-- Copyright -->
        <div class="footer-copyright">
                &copy; 2025 All Rights Reserved
        </div>
    </div>
    </footer>
</div>

<!-- ---------------- TERMS & CONDITIONS MODAL ---------------- -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <!-- Terms and Conditions content for eSkolar -->

        <div class="terms-bubble">
            <h4>1. Introduction</h4>
            <p>Welcome to eSkolar. By accessing or using our platform, you agree to these Terms and Conditions (“Terms”). Please read them carefully.</p>

            <h4>2. Acceptance of Terms</h4>
            <p>By registering for an account or using our services, you agree to comply with and be bound by these Terms. If you do not agree, please do not use the platform.</p>

            <h4>3. User Eligibility</h4>
            <p>You must be at least 18 years old or have parental/guardian consent to use this platform. By using eSkolar, you confirm that you meet these requirements.</p>

            <h4>4. Account Registration and Security</h4>
            <ul>
                <li>You must provide accurate and complete information during registration.</li>
                <li>You are responsible for maintaining the confidentiality of your account credentials.</li>
                <li>Notify us immediately of any unauthorized use of your account.</li>
            </ul>

            <h4>5. User Roles and Responsibilities</h4>
            <ul>
                <li><strong>Students:</strong> May view and apply for scholarships, upload required documents, and manage their profiles.</li>
                <li><strong>Institutions and Benefactors:</strong> May post scholarships and announcements, manage applications, and view applicant data.</li>
                <li><strong>Admins:</strong> Oversee platform operations, approve postings, and manage compliance.</li>
            </ul>

            <h4>6. Scholarship and Announcement Posting</h4>
            <ul>
                <li>Only authorized institutions and benefactors may post scholarships and announcements.</li>
                <li>All postings must be accurate, lawful, and not misleading.</li>
                <li>We reserve the right to review, approve, edit, or remove any posting at our discretion.</li>
            </ul>

            <h4>7. Document Uploads and Profile Information</h4>
            <ul>
                <li>Students may upload documents (e.g., IDs, grade reports) for application and verification purposes.</li>
                <li>All users are responsible for the accuracy and legality of the information and documents they provide.</li>
                <li>Uploaded documents may be processed using OCR (Optical Character Recognition) to auto-fill forms.</li>
            </ul>

            <h4>8. Privacy and Data Protection</h4>
            <ul>
                <li>We collect and process personal and academic information in accordance with the Philippine Data Privacy Act of 2012 (RA 10173).</li>
                <li>By using the platform, you consent to our collection, use, and storage of your data as described in our Privacy Policy.</li>
                <li>You have the right to access, correct, or request deletion of your personal data.</li>
            </ul>

            <h4>9. Acceptable Use</h4>
            <ul>
                <li>You agree not to use the platform for any unlawful, harmful, or fraudulent activity.</li>
                <li>You may not upload viruses, attempt to gain unauthorized access, or disrupt the platform’s operation.</li>
            </ul>

            <h4>10. Intellectual Property</h4>
            <ul>
                <li>All content and software on c2_eskolar are owned by us or our licensors, except for user-uploaded documents and postings.</li>
                <li>You may not copy, modify, or distribute platform content without permission.</li>
            </ul>

            <h4>11. Disclaimers and Limitation of Liability</h4>
            <ul>
                <li>We provide the platform “as is” and do not guarantee uninterrupted or error-free service.</li>
                <li>We are not responsible for the accuracy of scholarship postings or user-provided information.</li>
                <li>To the extent permitted by law, we are not liable for any damages arising from your use of the platform.</li>
            </ul>

            <h4>12. Termination and Suspension</h4>
            <ul>
                <li>We may suspend or terminate your account if you violate these Terms or applicable laws.</li>
                <li>You may close your account at any time by contacting support.</li>
            </ul>

            <h4>13. Governing Law and Dispute Resolution</h4>
            <ul>
                <li>These Terms are governed by the laws of the Republic of the Philippines.</li>
                <li>Any disputes will be resolved through amicable negotiation or, if necessary, by the appropriate courts in the Philippines.</li>
            </ul>

            <h4>14. Changes to Terms</h4>
            <ul>
                <li>We may update these Terms from time to time. We will notify users of significant changes.</li>
                <li>Continued use of the platform after changes means you accept the new Terms.</li>
            </ul>

            <h4>15. Contact Information</h4>
            <p>For questions or concerns, contact us at [insert contact email or support link].</p>

            <h4>16. Links to Other Policies</h4>
            <ul>
                <li><a href="/privacy-policy">Privacy Policy</a></li>
                <li><a href="/cookie-policy">Cookie Policy</a></li>
            </ul>
        </div>
      </div>

      <div class="modal-footer">
      <!-- Confirmation button -->
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
      </div>
    </div>
  </div>
</div>

<!-- ---------------- CONTACT MODAL ---------------- -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="contactModalLabel">Contact Us</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="mb-4">We'd love to hear from you! Fill out the form below and we'll get back to you as soon as possible.</p>
        
        <!-- Contact form -->
        <form id="contactForm">
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="contactName" class="form-label">Name *</label>
              <input type="text" class="form-control" id="contactName" required>
            </div>
            <div class="col-md-6">
              <label for="contactEmail" class="form-label">Email Address *</label>
              <input type="email" class="form-control" id="contactEmail" required>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="contactSubject" class="form-label">Subject *</label>
            <select class="form-select" id="contactSubject" required>
              <option value="">Select a topic...</option>
              <option value="General Inquiry">General Inquiry</option>
              <option value="Technical Support">Technical Support</option>
              <option value="Scholarship Questions">Scholarship Questions</option>
              <option value="Partnership Opportunities">Partnership Opportunities</option>
              <option value="Feedback">Feedback</option>
              <option value="Other">Other</option>
            </select>
          </div>
          
          <div class="mb-3">
            <label for="contactMessage" class="form-label">Message *</label>
            <textarea class="form-control" id="contactMessage" rows="5" placeholder="Please describe your inquiry in detail..." required></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="sendEmail()">Send Message</button>
      </div>
    </div>
  </div>
</div>

<!-- ---------------- JAVASCRIPT FOR MODAL & EMAIL ---------------- -->
<script>
/* Sends the email using mailto link and resets form */
function sendEmail() {
    const name = document.getElementById('contactName').value;
    const email = document.getElementById('contactEmail').value;
    const subject = document.getElementById('contactSubject').value;
    const message = document.getElementById('contactMessage').value;
    
    if (!name || !email || !subject || !message) {
        alert('Please fill in all required fields.');
        return;
    }
    
    const emailBody = `Name: ${name}%0D%0AEmail: ${email}%0D%0A%0D%0AMessage:%0D%0A${encodeURIComponent(message)}`;
    const mailtoLink = `mailto:eskolarph@gmail.com?subject=${encodeURIComponent('[eSkolar Contact] ' + subject)}&body=${emailBody}`;
    
    // Hide modal properly (Bootstrap or jQuery fallback)
    const modalElement = document.getElementById('contactModal');
    try {
        if (typeof bootstrap !== 'undefined') {
            const modal = bootstrap.Modal.getInstance(modalElement);
            if (modal) {
                modal.hide();
            }
        } else if (typeof $ !== 'undefined') {
            $('#contactModal').modal('hide');
        }
    } catch (e) {
        console.log('Bootstrap modal hide failed:', e);
    }
    
    // Reset form and open email client
    document.getElementById('contactForm').reset();
    
    // Open email after modal closes
    setTimeout(() => {
        window.location.href = mailtoLink;
    }, 300);
}

/* Force close and cleanup in case modal is stuck */
function forceCloseModal() {
    // Reset form
    document.getElementById('contactForm').reset();
    
    // Force remove all modal elements and classes
    const modalElement = document.getElementById('contactModal');
    
    // Hide modal completely
    modalElement.style.display = 'none !important';
    modalElement.classList.remove('show', 'fade');
    modalElement.setAttribute('aria-hidden', 'true');
    modalElement.removeAttribute('aria-modal');
    modalElement.removeAttribute('role');
    
    // Remove all possible backdrop elements
    document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
    document.querySelectorAll('[class*="modal-backdrop"]').forEach(el => el.remove());
    
    // Clean up body completely
    document.body.classList.remove('modal-open');
    document.body.style.overflow = 'auto';
    document.body.style.paddingRight = '0px';
    document.body.style.marginRight = '';
    document.body.removeAttribute('style');
    
    // Remove any lingering modal-related elements
    document.querySelectorAll('[style*="backdrop"]').forEach(el => el.remove());
    
    // Force page to be interactive again
    document.documentElement.style.overflow = 'auto';
    
    console.log('Modal force closed');
}

// Ensure modal can be opened and closed properly
document.addEventListener('DOMContentLoaded', function() {
    const contactModal = document.getElementById('contactModal');
    
    // Cleanup after modal is hidden
    contactModal.addEventListener('hidden.bs.modal', function() {
        forceCleanup();
    });
    
    // Add click handlers for contact links
    const contactLinks = document.querySelectorAll('[data-bs-target="#contactModal"]');
    contactLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            // First ensure any previous modal state is cleaned
            forceCleanup();
            
            // Then open modal
            setTimeout(() => {
                try {
                    if (typeof bootstrap !== 'undefined') {
                        const modal = new bootstrap.Modal(contactModal);
                        modal.show();
                    } else if (typeof $ !== 'undefined') {
                        $('#contactModal').modal('show');
                    }
                } catch (e) {
                    console.log('Modal open error:', e);
                }
            }, 50);
        });
    });
    
    // Handle Cancel button
    const cancelBtn = contactModal.querySelector('[data-bs-dismiss="modal"]');
    if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
            forceCleanup();
        });
    }
});

/* Cleanup helper for removing leftover modal states */
function forceCleanup() {
    // Remove ALL modal-related classes and elements
    document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
    document.querySelectorAll('[class*="backdrop"]').forEach(el => el.remove());
    
    // Clean body
    document.body.classList.remove('modal-open');
    document.body.style.overflow = '';
    document.body.style.paddingRight = '';
    document.body.removeAttribute('style');
    
    // Clean html element too
    document.documentElement.style.overflow = '';
    
    console.log('Force cleanup completed');
}
</script>

<!-- ---------------- BLAZOR BACKEND CODE ---------------- -->
@code {
    // Navigation handlers for header buttons
    void GoToSignUp() => Navigation.NavigateTo("/signup");
    void GoToLogin() => Navigation.NavigateTo("/login");
}